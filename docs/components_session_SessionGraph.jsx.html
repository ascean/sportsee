<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/session/SessionGraph.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/session/SessionGraph.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, { useState, useCallback } from "react";
import {
    LineChart,
    Line,
    XAxis,
    Tooltip,
    Legend,
    ResponsiveContainer,
} from "recharts";

/**
 * Generate LineChart with sessions length datas
 * @param {Object} sessionDatas
 * @param {number} sessionDatas.userId User code
 * @param {Array.&lt;{day:string, sessionLength:number}>} sessionDatas.sessions User data sessions (day, length)
 * @returns {ReactElement} LineChart
 */
const SessionGraph = ({sessionDatas}) => {
    const [opacity, setOpacity] = useState({});

    const renderLegend = () => "Durée moyenne des sessions";
    
    /**
     * Render tooltip on LineChart hover
     * @param {Object} props
     * @param {boolean} props.active
     * @param {Array.&lt;{value:number}>} props.payload
     * @returns {ReactElement} 
     */
    const CustomTooltip = ({ active, payload }) => {
        if (active &amp;&amp; payload &amp;&amp; payload.length) {
            return (
                &lt;div className="custom-tooltip-session">
                    &lt;p className="label">{`${payload[0].value} min`}&lt;/p>
                &lt;/div>
            );
        }
    
        return null;
    };

    //hover effect on LineChart
    const handleMouseEnter = useCallback(
        (changeOpacity) => {
            const { dataKey } = changeOpacity;
            setOpacity({ ...opacity, [dataKey]: 0.5 });
        },
        [opacity, setOpacity]
    );

    const handleMouseLeave = useCallback(
        (changeOpacity) => {
            const { dataKey } = changeOpacity;
            setOpacity({ ...opacity, [dataKey]: 1 });
        },
        [opacity, setOpacity]
    );
    let mouseXpercentage
    
    return (
        &lt;div className="session-container">
            &lt;ResponsiveContainer width="100%" height="90%">
                
                &lt;LineChart
                    width={250}
                    height={150}
                    data={sessionDatas}
                    style={{ color: "#FF8181" }}
                    margin={{ top: 5, right: 10, left: 10, bottom: 5 }}
                    
                    onMouseMove={(e) => {
                        let div = document.querySelector(".session-container");
                        div.style.background = '#FF0000'
                        if (e.isTooltipActive === true) {
                            let windowWidth = div.clientWidth;
                            mouseXpercentage = Math.round((e.activeCoordinate.x / windowWidth) * 100);
                            div.style.background = `linear-gradient(90deg, rgba(255,0,0,1) ${mouseXpercentage}%, rgba(230,0,0,1.5) ${mouseXpercentage}%, rgba(230,0,0,1.5) 100%)`;
                        }
                    }}
                    >
                    &lt;defs>
                        &lt;linearGradient
                            id="colorLine"
                            x1="0%"
                            y1="0"
                            x2="100%"
                            y2="0"
                        >
                            &lt;stop offset="0%" stopColor="rgba(255,255,255,0.5)" />
                            &lt;stop offset={`${50}%`} stopColor="rgba(255,255,255,0.5)" />
                            &lt;stop offset={`${100}%`} stopColor="#FFF" />
                        &lt;/linearGradient>
                    &lt;/defs>
                    &lt;XAxis dataKey="day" tickMargin={25} tickSize={1} />
                    &lt;Legend
                        verticalAlign="top"
                        width={"70%"}
                        height={40}
                        iconSize="5"
                        content={renderLegend}
                        onMouseEnter={handleMouseEnter}
                        onMouseLeave={handleMouseLeave}
                    />

                    &lt;Line
                        type="monotone"
                        dataKey="sessionLength"
                        stroke="url(#colorLine)"
                        strokeWidth="2"

                        dot={{ r: 0 }}
                        activeDot={{
                            stroke: "rgba(255, 255, 255, 0.3)",
                            strokeWidth: 10,
                            r: 4,
                        }}

                        
                    />
                    &lt;Tooltip cursor={false} content={&lt;CustomTooltip />} />
                &lt;/LineChart>
            &lt;/ResponsiveContainer>
        &lt;/div>
    );
};
export default SessionGraph;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ActivityModel_ActivityModel.html">ActivityModel</a></li><li><a href="Button.html">Button</a></li><li><a href="FormattedKeyDataModel_FormattedKeyDataModel.html">FormattedKeyDataModel</a></li><li><a href="KeyDataModel_KeyDataModel.html">KeyDataModel</a></li><li><a href="PerformanceDataModel_PerformanceDataModel.html">PerformanceDataModel</a></li><li><a href="SessionModel_SessionModel.html">SessionModel</a></li><li><a href="UserActivityModel_UserActivityModel.html">UserActivityModel</a></li><li><a href="UserAverageSessionModel_UserAverageSessionModel.html">UserAverageSessionModel</a></li><li><a href="UserInfosModel_UserInfosModel.html">UserInfosModel</a></li><li><a href="UserMainDataModel_UserMainDataModel.html">UserMainDataModel</a></li><li><a href="UserPerformanceModel_UserPerformanceModel.html">UserPerformanceModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#ActivityGraph">ActivityGraph</a></li><li><a href="global.html#Error">Error</a></li><li><a href="global.html#Header">Header</a></li><li><a href="global.html#KeyData">KeyData</a></li><li><a href="global.html#ObjectifGraph">ObjectifGraph</a></li><li><a href="global.html#PerformanceGraph">PerformanceGraph</a></li><li><a href="global.html#SessionGraph">SessionGraph</a></li><li><a href="global.html#User">User</a></li><li><a href="global.html#UserInfos">UserInfos</a></li><li><a href="global.html#VerticalBar">VerticalBar</a></li><li><a href="global.html#VerticalButton">VerticalButton</a></li><li><a href="global.html#getUserActivity">getUserActivity</a></li><li><a href="global.html#getUserInfos">getUserInfos</a></li><li><a href="global.html#getUserPerformance">getUserPerformance</a></li><li><a href="global.html#getUserSession">getUserSession</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.0</a> on Mon Nov 14 2022 09:19:40 GMT+0100 (heure normale d’Europe centrale)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
